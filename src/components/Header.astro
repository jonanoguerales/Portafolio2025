---
const navItems = [
  { href: '#inicio', label: 'Inicio' },
  { href: '#proyectos', label: 'Proyectos' },
  { href: '#experiencia', label: 'Experiencia' },
  { href: '#tecnologias', label: 'Tecnologías' },
  { href: '#sobre-mi', label: 'Sobre mí' },
  { href: '#contacto', label: 'Contacto' },
];
---

<header
  id="header"
  class="w-full fixed left-0 top-0 z-50 px-4 transition-all duration-300"
  role="banner"
>
  <nav
    class="max-w-7xl mx-auto flex items-center justify-between py-4"
    role="navigation"
    aria-label="Navegación principal"
  >
    <a
      href="#inicio"
      class="text-xl font-bold text-white hover:text-cyan-400 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-black rounded px-2 py-1"
      aria-label="Ir al inicio"
    >
      JN
    </a>

    <ul class="hidden md:flex items-center gap-6">
      {
        navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class="text-white hover:text-cyan-400 transition-colors font-medium relative group focus:outline-none focus:text-cyan-400"
              aria-label={`Ir a sección de ${item.label}`}
            >
              {item.label}
              <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-cyan-400 transition-all group-hover:w-full" />
            </a>
          </li>
        ))
      }
    </ul>

    <button
      id="mobile-menu-button"
      class="md:hidden text-white p-2 focus:outline-none focus:ring-2 focus:ring-cyan-400 rounded"
      aria-label="Abrir menú de navegación"
      aria-expanded="false"
      aria-controls="mobile-menu"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        aria-hidden="true"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"
        />
      </svg>
    </button>
  </nav>

  <div
    id="mobile-menu"
    class="md:hidden hidden bg-black/95 backdrop-blur-lg border-t border-cyan-900/50"
    role="menu"
  >
    <ul class="flex flex-col py-4 px-4 space-y-2">
      {
        navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class="block text-white hover:text-cyan-400 hover:bg-cyan-900/20 transition-colors font-medium py-3 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-400"
              role="menuitem"
            >
              {item.label}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</header>

<script>
  const header = document.getElementById('header');
  
  const handleScroll = () => {
    if (!header) return;
    
   if (window.scrollY > 50) {
      header.classList.add('bg-[#020618]/90', 'backdrop-blur-lg', 'shadow-lg', 'shadow-[#20d8f8]/20');
    } else {
      header.classList.remove('bg-[#020618]/90', 'backdrop-blur-lg', 'shadow-lg', 'shadow-[#20d8f8]/20');
    }
  }

  window.addEventListener('scroll', handleScroll, { passive: true });
  handleScroll();

  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuButton?.addEventListener('click', () => {
    const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
    
    mobileMenuButton.setAttribute('aria-expanded', String(!isExpanded));
    mobileMenu?.classList.toggle('hidden');
    
    if (!isExpanded) {
      const firstLink = mobileMenu?.querySelector('a');
      firstLink?.focus();
    }
  });

  mobileMenu?.querySelectorAll('a').forEach((link) => {
    link.addEventListener('click', () => {
      mobileMenu.classList.add('hidden');
      mobileMenuButton?.setAttribute('aria-expanded', 'false');
    });
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !mobileMenu?.classList.contains('hidden')) {
      mobileMenu?.classList.add('hidden');
      mobileMenuButton?.setAttribute('aria-expanded', 'false');
      mobileMenuButton?.focus();
    }
  });
</script>

<style>
  @media (prefers-contrast: high) {
    header a {
      text-decoration: underline;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    header,
    header * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
</style>